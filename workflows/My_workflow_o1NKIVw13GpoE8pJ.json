[{"createdAt":"2025-12-30T08:37:07.175Z","updatedAt":"2025-12-31T01:01:04.000Z","id":"o1NKIVw13GpoE8pJ","name":"My workflow","active":false,"nodes":[{"parameters":{"operation":"executeQuery","query":"SELECT\n*\nfrom meta_table as mt \ninner join content_table as ct on mt.seq_id = ct.content_id\nlimit 2","options":{}},"id":"12b84e1c-47df-4ef4-be71-cd89be2a80d7","name":"MySQL Select","type":"n8n-nodes-base.mySql","typeVersion":2,"position":[-260,0],"credentials":{"mySql":{"id":"6IQi6V6Ns0vwHmRF","name":"MySQL account"}}},{"parameters":{"mode":"runOnceForEachItem","jsCode":"const chunkSize = 800;\nconst overlap = 200;\n\nconst text = $json.content\nconst words = text.split(/\\s+/);\n\nlet chunks = [];\nlet start = 0;\nlet chunkId = 0;\n\nwhile (start < words.length) {\n  const end = start + chunkSize;\n  const chunkWords = words.slice(start, end);\n\n  chunks.push({\n    json: {\n      doc_id: $json.doc_id,\n      title: $json.title,\n      chunk_id: chunkId,\n      text: chunkWords.join(\" \")\n    }\n  });\n\n  start += chunkSize - overlap;\n  chunkId++;\n}\n\nreturn chunks[0];"},"id":"599db419-7494-4dba-9c78-99579d88a677","name":"Chunk Content","type":"n8n-nodes-base.code","typeVersion":2,"position":[-80,0]},{"parameters":{"method":"POST","url":"http://host.docker.internal:11434/api/embeddings","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"model\": \"nomic-embed-text\",\n  \"prompt\": \"{{$json.text}}\",\n  \"doc_id\": {{ $json.doc_id }},\n  \"title\": \"{{ $json.title }}\",\n  \"chunk_id\": {{ $json.chunk_id }}\n}","options":{}},"id":"0d9d9098-0ded-466b-82b4-38d51de45b5f","name":"Ollama Embedding","type":"n8n-nodes-base.httpRequest","typeVersion":4,"position":[120,0]},{"parameters":{"method":"PUT","url":"http://qdrant:6333/collections/documents/points","sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"points\": [\n    {\n      \"id\": {{$json.doc_id}},\n      \"vector\": {\n        \"embedding\":[{{$json.embedding}}]\n      },\n      \"payload\": {\n        \"text\": \"{{$json.text}}\",\n        \"doc_id\": {{$json.doc_id}},\n        \"title\": \"{{$json.title}}\",\n        \"chunk_id\": {{$json.chunk_id}}\n      }\n    }\n  ]\n}\n\n","options":{}},"id":"3dcbcfc7-97b6-4a41-ae19-5de27549af42","name":"Qdrant Upsert","type":"n8n-nodes-base.httpRequest","typeVersion":4,"position":[480,0]},{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-480,0],"id":"344d4379-b68e-45ef-870b-b835bee5332a","name":"When clicking â€˜Test workflowâ€™"},{"parameters":{"mode":"runOnceForEachItem","jsCode":"return {\n  json: {\n    embedding:$json.embedding,\n    // â¬‡ï¸ ì´ì „ Chunk ë…¸ë“œì—ì„œ ê°€ì ¸ì˜¤ê¸°\n    //uuid: crypto.randomUUID(),\n    doc_id: $json.doc_id,\n    chunk_id: $json.chunk_id,\n    title: $json.title,\n    text: $json.text\n  }\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[300,0],"id":"ee9cedf8-4a44-4bc6-89b2-4c245719724b","name":"Code"}],"connections":{"MySQL Select":{"main":[[{"node":"Chunk Content","type":"main","index":0}]]},"Chunk Content":{"main":[[{"node":"Ollama Embedding","type":"main","index":0}]]},"Ollama Embedding":{"main":[[{"node":"Code","type":"main","index":0}]]},"When clicking â€˜Test workflowâ€™":{"main":[[{"node":"MySQL Select","type":"main","index":0}]]},"Qdrant Upsert":{"main":[[]]},"Code":{"main":[[{"node":"Qdrant Upsert","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"MySQL Select":[{"json":{"seq_id":1,"title":"ì†Œë¹„ í™˜ê²½ ë³€í™”ì— ë”°ë¥¸ ì†Œí˜¸ ì—…ì¢… ì ê²€ ë° ë¶„ì„ì„ ë°”íƒ•ìœ¼ë¡œ ë³´ëŠ” 2025ë…„ë„ ì „ëžµ.pdf","file_type":"pdf","sorce":"manual_upload","create_dt":"2025-12-30T15:33:45.000Z","content_id":1,"doc_id":1,"page_no":1,"chunk_no":1,"content":"ì†Œë¹„ í™˜ê²½ ë³€í™”ì— ë”°ë¥¸ ì†Œí˜¸ ì—…ì¢… ì ê²€ ë° ë¶„ì„ì„ \në°”íƒ•ìœ¼ë¡œ ë³´ëŠ” 2025ë…„ë„ ì „ëžµ \n \nðŸ“Š 2025ë…„ ì†Œë¹„ í™˜ê²½ ë³€í™” ëŒ€ì‘ ì „ëžµ ì‹¤í–‰ ê²°ê³¼ ë³´ê³ ì„œ \n2025ë…„ í•œ í•´ ë™ì•ˆ ì‹¤í–‰ëœ ì´ì»¤ë¨¸ìŠ¤ ë””ì§€í„¸ ì „í™˜ì˜ êµ¬ì²´ì ì¸ ì„±ê³¼ë¥¼ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤. \nðŸ“ˆ í¬í•¨ëœ 5ê°œ ì‹œê°í™” ìžë£Œ \nê·¸ë¦¼ 1: 2025ë…„ ë¶„ê¸°ë³„ ì „ëžµ ì‹¤í–‰ ì§„ë„ìœ¨ \n \nê·¸ë¦¼ 1: 2025ë…„ ë¶„ê¸°ë³„ ì „ëžµ ì‹¤í–‰ ì§„ë„ìœ¨ \nâ—â€‹\nQ1 ê¸°ì´ˆ êµ¬ì¶•(45%) â†’ Q4 ìµœì í™”(95%) \nâ—â€‹\n4ê°œ í•µì‹¬ ì „ëžµì˜ ë‹¨ê³„ë³„ ì—­í•  ë¶„ë‹´","created_at":"2025-12-30T15:33:45.000Z"}},{"json":{"seq_id":4,"title":"ì†Œë¹„ í™˜ê²½ ë³€í™”ì— ë”°ë¥¸ ì†Œí˜¸ ì—…ì¢… ì ê²€ ë° ë¶„ì„.txt","file_type":"txt","sorce":"manual_upload","create_dt":"2025-12-30T16:35:07.000Z","content_id":4,"doc_id":1,"page_no":4,"chunk_no":1,"content":"ê·¸ë¦¼ 4: ë¶„ê¸°ë³„ ì‹ ê·œ ê³ ê° íšë“ (ì„¸ëŒ€ë³„) \n \nê·¸ë¦¼ 4: 2025ë…„ ë¶„ê¸°ë³„ ì‹ ê·œ ê³ ê° íšë“ (ì„¸ëŒ€ë³„) \nâ—â€‹\nì—°ê°„ 4,300ëª… í™•ë³´ (ëª©í‘œ 3,000ëª… ëŒ€ë¹„ 143%) \nâ—â€‹\n50-60ëŒ€ê°€ ìµœëŒ€ ê³ ê°ì¸µ (42.3%)","created_at":"2025-12-30T15:33:45.000Z"}}]},"versionId":"5b1df839-d78a-4366-9769-54509791da72","triggerCount":0,"tags":[]}]